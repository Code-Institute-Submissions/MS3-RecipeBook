{% extends 'base.html' %} {% block content %} {% for recipe in recipes %}

<div class="row recipe-detail">
  <div class="col s12 m6">
    <div class="card card-recipe hoverable">
      <div class="card-image white-text">
        <img
          class="activator"
          src="{{recipe.image_link}}"
          alt="Recipe's image"
        />
      </div>
      <div class="card-content">
        <span class="card-title activator"
          >{{ recipe.recipe_name }}<i class="material-icons right"
            >more_vert</i
          ></span
        >
        <p>Category: {{recipe.category_name}}</p>
        <p>Diffilculty: {{ recipe.difficulty_name }}</p>
        <p>Review: {{ recipe.review_name }}</p>
        <p>Serve: {{ recipe.serve_name }}</p>
      </div>

      <div class="card-reveal">
        <span class="card-title"
          >Ingredients<i class="material-icons right">close</i></span
        >
        <ul>
        {% for ingredient in recipe.ingredients_name %}
          <li>{{ ingredient }}</li>
          {% endfor %}
        </ul>
        <span class="card-title">Instructions</span>
        <ul>
          {% for instruction in recipe.instructions_name %}
          <li>{{ instruction }}</li>
          {% endfor %}
        </ul>
        <div class="col s12 m6">
          <a
            href="{{url_for('edit_recipe', recipes_id=recipe._id)}}"
            class="waves-effect waves-light btn small-edit green"
            >Edit</a
          >
          <a
            href="{{url_for('delete_recipe', recipes_id=recipe._id)}}"
            class="waves-effect waves-light btn small-delete red"
            onclick="confirm_del()"
            >Delete</a
          >
        </div>
      </div>
    </div>
  </div>
</div>
<script>
// Request confirmation before deleting recipe 
function confirm_del(){
        let confirmation = confirm("Are you sure you want to delete this recipe?")
        if (confirmation == true){
            window.location.href="{{url_for('delete_recipe', recipes_id=recipe._id)}}";
            alert("The recipe has successfully been deleted.");
        }
        else {
            alert("The recipe has not been deleted.");
        }
    }
</script>
{% endfor %} {% endblock %}
